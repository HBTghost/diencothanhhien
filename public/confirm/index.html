<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
    <meta name="description" content="Xác nhận đơn hàng">
  
  <meta name="author" content="DalaFarm">
  <meta name="generator" content="Hugo 0.58.3" />
  <title>Xác nhận đơn hàng &middot; Điện cơ Thanh Hiền</title>
  <!-- Stylesheets -->
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" />
  
  <link href="https://dalafarm.vn/css/styles.min.css" rel="stylesheet">

  
    <link rel="stylesheet" href="https://dalafarm.vn/css/nprogress.css">
  
  
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5DD5J4G');</script>


  <!-- Custom Fonts -->
  

  
  <link href="//fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet" type="text/css">
  

  
    <link rel="shortcut icon" type="image/x-icon" href="https://dalafarm.vn/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://dalafarm.vn/favicon.ico">
  

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
  <script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
    0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
    for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
mixpanel.init("153e2f566618c4b223c21e1943ca8f2a");</script>
  
  <script>
      (function(h,o,t,j,a,r){
          h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
          h._hjSettings={hjid:1025333,hjsv:6};
          a=o.getElementsByTagName('head')[0];
          r=o.createElement('script');r.async=1;
          r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
          a.appendChild(r);
      })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
  </script>
</head>


<body id="page-top" class="index">

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5DD5J4G"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<div id="fb-root"></div>
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    
    js.src = 'https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v2.12&autoLogAppEvents=1';
    
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



     
     
     
     
     


<script>
    window.intercomSettings = {
        app_id: "e1j176t2"
    };
</script>
<script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/e1j176t2';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>

<!-- Navigation -->
<nav class="navbar navbar-default navbar-fixed-top navbar-shrink">
  <div class="container">
    <div class="header-top-bg navbar-fixed-top">
    <a href="https://dalafarm.vn/promotion"><a href="/promo-order">TẶNG KHĂN QUÀNG PASHMINA&hellip;</a></a>
    <ul class="lang-switcher">
        
        <li><a rel="alternate" href="/en" hreflang="en" lang="en">en</a></li>
        </ul>
</div>


    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
        <a class="navbar-brand page-scroll" href="/">
            DalaFarm
        </a>
      

      
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li class="hidden">
          <a href="/"></a>
        </li>
          



<li class="dropdown">
<a href="/#" class="dropdown-toggle" data-toggle="dropdown">
    
    <span>Bài viết</span>
    <span class="caret"></span>
</a>
<ul class="dropdown-menu">
    
    <li class="dropdown-submenu"
    ><a href="/blog"> Sản phẩm mới </a> </li>
    
    <li class="dropdown-submenu"
    ><a href="/dala-kitchen"> Hướng dẫn </a> </li>
    
</ul>

</li>


<li>
    <a href="/san-pham">
        
        <span>Sản Phẩm</span>
    </a>
    
</li>


<li>
    <a href="/qa">
        
        <span>Hỏi Đáp</span>
    </a>
    
</li>



<li class="dropdown">
<a href="/#" class="dropdown-toggle" data-toggle="dropdown">
    
    <span>Về Điện cơ Thanh Hiền</span>
    <span class="caret"></span>
</a>
<ul class="dropdown-menu">
    
    <li class="dropdown-submenu"
    ><a href="/company-profile"> Đôi nét về Điện cơ Thanh Hiền </a> </li>
    
    <li class="dropdown-submenu"
    ><a href="/company-docs"> Giấy tờ chứng nhận </a> </li>
    
    <li class="dropdown-submenu"
    ><a href="/team"> Thành Viên Điện cơ Thanh Hiền </a> </li>
    
</ul>

</li>


<li>
    <a href="/#contact">
        
        <span>Liên Hệ</span>
    </a>
    
</li>



      </ul>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container-fluid -->
</nav>

<!-- terms and conditions Grid Section -->
<section id="" class="bg-light-gray">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2 class="section-heading">Xác nhận đơn hàng</h2>
            </div>
        </div>
        <div class="row">
            <ul class="progressbar">
                <li class="active">Chọn sản phẩm</li>
                <li class="active">Thông tin</li>
                <li class="in-progress">Xác nhận</li>
                <li>Hoàn tất</li>
            </ul>
        </div>
        <div class="row alert alert-info">
            <p class="order-page-content">
                <p>LƯU Ý: ĐƠN HÀNG CHỈ ĐƯỢC HOÀN TẤT SAU KHI NHẤN NÚT HOÀN TẤT</p>

<p>Xin vui lòng kiểm tra và đảm bảo thông tin đơn hàng đã chính xác trước khi hoàn tất đặt hàng.</p>

            </p>
        </div>
            

<div class="row">
    <div class="col-md-12">
        <span style="font-size: 28px;">Mã đơn hàng <strong style="color: #A6CE39" data-bind="text: id"></strong></span>
    </div>
</div>
            <div class="row" id="order-content">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading clearfix">
                            <h4 class="panel-title pull-left" style="padding-top: 7.5px;vertical-align: center">Thông tin người mua</h4>
                            <div class="btn-group pull-right">
                                <button id="editDelivery" name="edit" class="btn btn-xxl btn-default btn-block">Sửa</button>
                            </div></div>
                        <div class="panel-body">
                            <p data-bind="text: name"></p>
                            <p data-bind="text: phone1"></p>
                            <p data-bind="text: phone2"></p>
                            <p data-bind="text: email"></p>
                            <p><span data-bind="text: address"></span>, <span data-bind="text: ward"></span>, <span data-bind="text: district"></span>, <span data-bind="text: province"></span></p>
                            <p>Hình thức thanh toán: <span data-bind="text: paymentType"></span></p>
                            <p data-bind="text: additionalNote" style="font-style: italic;" ></p>
                        </div>
                    </div>
                    <div class="panel panel-default">
    <div class="panel-heading">GIỎ HÀNG
    </div>

    <div class="panel-body" id="order-content">
        <p data-bind="foreach: products.filter(function(p){return p.amount>0})">
            
            
            <span data-bind="if: name == 'dalababy'">
                
                
                
                    
                    <img src="https://dalafarm.vn/img/product/dalababy-6.jpg" class="img-responsive img-thumbnail" alt="dalababy-6" style="width: 50px;">
                
                <span>
                    Combo bột rau củ ngũ vị -
                </span>
                <span data-bind="text: numeral(price).format('0,0')"></span>
                <span> x </span>
                <span data-bind="text: amount"></span>
                <span> = </span>
                <span data-bind="text: numeral(subtotal).format('0,0')"></span>
                <br/>
            </span>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <span data-bind="if: name == 'pumpkin'">
                
                
                
                    
                    <img src="https://dalafarm.vn/img/product/pumpkin-1.jpg" class="img-responsive img-thumbnail" alt="pumpkin-1" style="width: 50px;">
                
                <span>
                    Bột Bí Đỏ (50g) -
                </span>
                <span data-bind="text: numeral(price).format('0,0')"></span>
                <span> x </span>
                <span data-bind="text: amount"></span>
                <span> = </span>
                <span data-bind="text: numeral(subtotal).format('0,0')"></span>
                <br/>
            </span>
            
            
            
            <span data-bind="if: name == 'purpleswpotato'">
                
                
                
                    
                    <img src="https://dalafarm.vn/img/product/purple-sweet-potato-1.jpg" class="img-responsive img-thumbnail" alt="purple-sweet-potato-1" style="width: 50px;">
                
                <span>
                    Bột Khoai Lang Tím (50g) -
                </span>
                <span data-bind="text: numeral(price).format('0,0')"></span>
                <span> x </span>
                <span data-bind="text: amount"></span>
                <span> = </span>
                <span data-bind="text: numeral(subtotal).format('0,0')"></span>
                <br/>
            </span>
            
            
            
            <span data-bind="if: name == 'spinach'">
                
                
                
                    
                    <img src="https://dalafarm.vn/img/product/spinach-1.jpg" class="img-responsive img-thumbnail" alt="spinach-1" style="width: 50px;">
                
                <span>
                    Bột Rau Bó Xôi (50g) -
                </span>
                <span data-bind="text: numeral(price).format('0,0')"></span>
                <span> x </span>
                <span data-bind="text: amount"></span>
                <span> = </span>
                <span data-bind="text: numeral(subtotal).format('0,0')"></span>
                <br/>
            </span>
            
            
            
            <span data-bind="if: name == 'moringa'">
                
                
                
                    
                    <img src="https://dalafarm.vn/img/product/moringa-1.jpg" class="img-responsive img-thumbnail" alt="moringa-1" style="width: 50px;">
                
                <span>
                    Bột Chùm Ngây (50g) -
                </span>
                <span data-bind="text: numeral(price).format('0,0')"></span>
                <span> x </span>
                <span data-bind="text: amount"></span>
                <span> = </span>
                <span data-bind="text: numeral(subtotal).format('0,0')"></span>
                <br/>
            </span>
            
            
            
            <span data-bind="if: name == 'carrot'">
                
                
                
                    
                    <img src="https://dalafarm.vn/img/product/carrot-1.jpg" class="img-responsive img-thumbnail" alt="carrot-1" style="width: 50px;">
                
                <span>
                    Bột Cà Rốt (50g) -
                </span>
                <span data-bind="text: numeral(price).format('0,0')"></span>
                <span> x </span>
                <span data-bind="text: amount"></span>
                <span> = </span>
                <span data-bind="text: numeral(subtotal).format('0,0')"></span>
                <br/>
            </span>
            
            
            
            <span data-bind="if: name == 'beetroot'">
                
                
                
                    
                    <img src="https://dalafarm.vn/img/product/beetroot-1.jpg" class="img-responsive img-thumbnail" alt="beetroot-1" style="width: 50px;">
                
                <span>
                    Bột Củ Dền (50g) -
                </span>
                <span data-bind="text: numeral(price).format('0,0')"></span>
                <span> x </span>
                <span data-bind="text: amount"></span>
                <span> = </span>
                <span data-bind="text: numeral(subtotal).format('0,0')"></span>
                <br/>
            </span>
            
            
            
            <span data-bind="if: name == 'heartleaf100'">
                
                
                
                    
                    <img src="https://dalafarm.vn/img/product/heartleaf-100g-1.jpg" class="img-responsive img-thumbnail" alt="heartleaf-100g-1" style="width: 50px;">
                
                <span>
                    Bột Rau Diếp Cá (100g) -
                </span>
                <span data-bind="text: numeral(price).format('0,0')"></span>
                <span> x </span>
                <span data-bind="text: amount"></span>
                <span> = </span>
                <span data-bind="text: numeral(subtotal).format('0,0')"></span>
                <br/>
            </span>
            
            
            
            <span data-bind="if: name == 'heartleaf'">
                
                
                
                    
                    <img src="https://dalafarm.vn/img/product/heartleaf-50g-1.jpg" class="img-responsive img-thumbnail" alt="heartleaf-50g-1" style="width: 50px;">
                
                <span>
                    Bột Rau Diếp Cá (50g) -
                </span>
                <span data-bind="text: numeral(price).format('0,0')"></span>
                <span> x </span>
                <span data-bind="text: amount"></span>
                <span> = </span>
                <span data-bind="text: numeral(subtotal).format('0,0')"></span>
                <br/>
            </span>
            
            
            
            <span data-bind="if: name == 'pennywort100'">
                
                
                
                    
                    <img src="https://dalafarm.vn/img/product/pennywort-100g-1.jpg" class="img-responsive img-thumbnail" alt="pennywort-100g-1" style="width: 50px;">
                
                <span>
                    Bột Rau Má (100g) -
                </span>
                <span data-bind="text: numeral(price).format('0,0')"></span>
                <span> x </span>
                <span data-bind="text: amount"></span>
                <span> = </span>
                <span data-bind="text: numeral(subtotal).format('0,0')"></span>
                <br/>
            </span>
            
            
            
            <span data-bind="if: name == 'pennywort'">
                
                
                
                    
                    <img src="https://dalafarm.vn/img/product/pennywort-50g-1.jpg" class="img-responsive img-thumbnail" alt="pennywort-50g-1" style="width: 50px;">
                
                <span>
                    Bột Rau Má (50g) -
                </span>
                <span data-bind="text: numeral(price).format('0,0')"></span>
                <span> x </span>
                <span data-bind="text: amount"></span>
                <span> = </span>
                <span data-bind="text: numeral(subtotal).format('0,0')"></span>
                <br/>
            </span>
            
            
            
            <span data-bind="if: name == 'broccoli'">
                
                
                
                    
                    <img src="https://dalafarm.vn/img/product/broccoli-1.jpg" class="img-responsive img-thumbnail" alt="broccoli-1" style="width: 50px;">
                
                <span>
                    Bột Súp Lơ Xanh (50g) -
                </span>
                <span data-bind="text: numeral(price).format('0,0')"></span>
                <span> x </span>
                <span data-bind="text: amount"></span>
                <span> = </span>
                <span data-bind="text: numeral(subtotal).format('0,0')"></span>
                <br/>
            </span>
            
            
            
            

        </p>
        <p data-bind="visible: promotionalProducts != undefined && promotionalProducts['lotusAmt'] != undefined && promotionalProducts['lotusAmt'] > 0">
            <span>Bột Hạt Sen (50g) - 119,000 x 1 = -119,000</span><span> (Khuyến mãi)</span>
        </p>
        <p data-bind="visible: promotionalProducts != undefined && promotionalProducts['dalababyAmt'] != undefined && promotionalProducts['dalababyAmt'] > 0">
            <span>Bột rau củ DalaBaby (70g) - 199,000 x 1 = -199,000</span><span> (Khuyến mãi)</span>
        </p>
        <p data-bind="visible: promotionalProducts != undefined && promotionalProducts['garlicoilAmt'] != undefined && promotionalProducts['garlicoilAmt'] > 0">
            <span>Dầu tỏi tía Đà Lạt (250ml) - 150,000 x 1 = -150,000 </span><span> (Khuyến mãi)</span>
        </p>
        <p data-bind="visible: promotionalProducts != undefined && promotionalProducts['mooncakeAmt'] != undefined && promotionalProducts['mooncakeAmt'] > 0">
            <span>Hộp bánh trung thu 4 cái - 170,000 x <span data-bind="text: promotionalProducts != undefined && promotionalProducts['mooncakeAmt']"></span> = 0 </span><span> (Khuyến mãi)</span>
        </p>
        <p>
            <span data-bind="if: shippingCost != undefined && !shippingCost.isNaN && shippingCost() > 0">
                <span>Phí giao hàng: </span><span data-bind="text: numeral(shippingCost()).format('0,0')"></span><span></span>
            </span>
            <span data-bind="if: shippingCost != undefined && !shippingCost.isNaN && shippingCost() == 0">
                <span>Phí giao hàng: MIỄN PHÍ</span>
            </span>
        </p>
        <p>
            <span data-bind="if: discountPercent">
                <span>Giảm giá: </span>-<span data-bind="text: discountPercent"></span>%
            </span>
            <p>
                <span data-bind="visible: shippingCost != undefined && !shippingCost.isNaN">Tổng tiền: </span>
                <span data-bind="visible: shippingCost == undefined || shippingCost.isNaN">Tạm tính: </span>
                <span data-bind="text: numeral(subtotal()).format('0,0')"></span>
            </p>
        </p>
    </div>
</div>
                </div>
            </div>
        <div class="row">
            <div class="form-group">
                <div class="col-md-6 col-xs-12 text-right second-last-btn">
                    <button id="purchaseBtn" name="save" class="btn btn-xxl btn-success btn-block" data-bind="enable: shippingCostLoaded"
                            data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> Đang nhập đơn hàng">Hoàn tất
                    </button>
                </div>
                <div class="col-md-3 col-xs-6 text-center">
                    <button id="cancel" name="cancel" class="btn btn-xxl btn-danger btn-block" onclick="window.location = '/';">Hủy
                        đặt hàng
                    </button>
                </div>
                <div class="col-md-3 col-xs-6">
                    <button id="edit" name="edit" class="btn btn-xxl btn-default btn-block">Sửa đơn hàng</button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer section -->
<footer class="bg-logo-brown">
  <div class="container">
    <div class="row">
      <div class="col-md-4 footer-info">
        <span><h5 id="dalafarm-công-ty-tnhh-sxtm-chuông-xanh">DALAFARM - CÔNG TY TNHH SXTM CHUÔNG XANH</h5>

<p><i class="fa fa-building-o"></i> 317 Lô D, CC Lạc Long Quân, Phường 5, Quận 11, TP.HCM <i class="fa fa-phone"></i> <a href="tel:0906 951 498">0906 951 498</a></p>

<p><i class="fa fa-cogs"></i> Tổ 18, thôn Xuân Ngọc, xã Vĩnh Ngọc, Nha Trang, Khánh Hòa</p>

<p><i class="fa fa-envelope"></i> <a href="mailto:info@dalafarm.vn">info@dalafarm.vn</a></p>

<p><i class="fa fa-calendar"></i> Thứ 2 - thứ 7 <i class="fa fa-clock-o"></i> 8:00 - 17:00</p>
</span>
      </div>
      <div class="col-md-4">
        <ul class="list-inline social-buttons">
          <div class="fb-page" data-href="https://www.facebook.com/Dalafarm.com.vn" data-tabs="timeline" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"><blockquote cite="https://www.facebook.com/Dalafarm.com.vn" class="fb-xfbml-parse-ignore"><a href="https://www.facebook.com/Dalafarm.com.vn">DalaFarm</a></blockquote></div>
          <br/>
          <br/>
          
            <li><a href="https://www.facebook.com/dalafarm.com.vn/" target="_blank"><i class="fa fa-facebook"></i></a></li>
          
            <li><a href="https://www.pinterest.com/dalafarm/" target="_blank"><i class="fa fa-pinterest"></i></a></li>
          
            <li><a href="https://www.instagram.com/dalafarm.vn/" target="_blank"><i class="fa fa-instagram"></i></a></li>
          

        </ul>
		 <ul class="list-inline quicklinks">

          
            <li><a href="https://dalafarm.vn/term-condition">Điều khoản sử dụng</a></li>
          

        </ul>
        <span class="copyright">Bản quyền thuộc DalaFarm &copy; 2017 - 2018</span>
      </div>
      <div class="col-md-4 footer-quicklinks">
		 <span></span>
		  <ul class="list-inline quicklinks">

          
            <li style="text-decoration: underline;"><a href="https://dalafarm.vn/blog/">DalaFarm Blog</a></li></br>
          
            <li style="text-decoration: underline;"><a href="https://dalafarm.vn/dala-kitchen/">DalaFarm Kitchen</a></li></br>
          
            <li style="text-decoration: underline;"><a href="https://dalafarm.vn/san-pham/">Sản phẩm</a></li></br>
          
            <li style="text-decoration: underline;"><a href="https://dalafarm.vn/qa/">Hỏi đáp</a></li></br>
          
            <li style="text-decoration: underline;"><a href="https://dalafarm.vn/company-profile/">Đôi nét về DalaFarm</a></li></br>
          
            <li style="text-decoration: underline;"><a href="https://dalafarm.vn/company-docs/">Giấy tờ chứng nhận</a></li></br>
          
            <li style="text-decoration: underline;"><a href="https://dalafarm.vn/team/">Thành viên DalaFarm</a></li></br>
          

        </ul>
      </div>
    </div>
  </div>
</footer>


<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<!-- Bootstrap Core -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

<!-- Form Validation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-form-validator/2.3.44/jquery.form-validator.min.js"></script>




<script src="https://dalafarm.vn/js/nprogress.js"></script>



<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/3310136.js"></script>


<!-- Custom Theme -->
<script src="https://dalafarm.vn/js/scripts-other-page.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/numeral.js/2.0.6/numeral.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout-validation/2.0.3/knockout.validation.min.js"></script>
<script src="https://dalafarm.vn/js/scripts-order-pages.min.js"></script>
<script>
    $(function () {

        var bill = applyPromotion(JSON.parse(sessionStorage.getItem('order')));

        function ViewModel() {
            this.id = bill.id;
            this.date = new Date(bill.meta.date);
            this.name = bill.info.name;
            this.phone1 = bill.info.phone1;
            this.phone2 = bill.info.phone2;
            this.email = bill.info.email;
            this.address = bill.info.address;
            this.province = bill.info.province;
            this.district = bill.info.district;
            this.ward = bill.info.ward;
            this.products = getProductsArrayFromBill(bill);
            this.promotionalProducts = bill.promotionalProducts;
            this.shippingCost = ko.observable(bill.shippingCost || 0);
            this.subtotal = ko.computed(function(){ return bill.subtotal + this.shippingCost();}, this);
            this.paymentType = humanizePaymentType(bill.info.paymentType);
            this.additionalNote = bill.info.additionalNote;
            this.discountPercent = bill.discountPercent;
            this.shippingCostLoaded = ko.observable(false);
            this.shippingVendor = ko.observable();
        }

        
        var viewModel = new ViewModel();
        ko.applyBindings(viewModel);
        dataLayer.push({
            'value': bill.subtotal,
            'transactionShipping': bill.shippingCost,
            'transactionTotal': bill.subtotal,
            'transactionProducts': conformProductsArrayForAnalyticsPurpose(getProductsArrayFromBill(bill)),
            'order-id': bill.id,
            'transactionId': bill.id,
            'currency': 'VND'});

        function getShippingCost() {
            if(bill.freeShip) {

                    viewModel.shippingCost(0);



                viewModel.shippingCostLoaded(true);
            }else{
                getShippingCostNUpdateSubtotal(lookupPlaceIdFromName(bill.info.availableDistricts, bill.info.district), shippingCostLoadedCallback, calculateWeightOfPowders(bill));
            }
        }

        function shippingCostLoadedCallback(shippingCost, vendorId) {
            viewModel.shippingCost(shippingCost);
            viewModel.shippingCostLoaded(true);
            viewModel.shippingVendor(vendorId);
        }

        getShippingCost();

        $('#purchaseBtn').on('click', function (e) {
            e.preventDefault();
            if(isEmptyCart(bill)) {
                alert("Bạn không có sản phẩm nào trong đơn hàng. Vui lòng sửa đơn hàng và chọn sản phẩm cần mua trước khi hoàn tất đặt hàng!");
                return;
            }
            $('#purchaseBtn').button('loading');
            saveToDb(bill);
        });
        $('#editDelivery').on('click', function (e) {
            e.preventDefault();
            window.location = "/shipping";
        });
        $('#edit').on('click', function (e) {
            e.preventDefault();
            window.location = "/order";
        });

        function saveToDb(bill) {
            var billFormUI = ko.toJS(viewModel);
            bill.status = "Ordered";
            bill.shippingCost = billFormUI.shippingCost;
            bill.shippingVendor = billFormUI.shippingVendor;
            bill.subtotal = calculateTotalBill(bill);
            bill.products = getProductsArrayFromBill(bill);
            bill.info.districtId = lookupPlaceIdFromName(bill.info.availableDistricts, bill.info.district);
            bill.info.wardId = lookupPlaceIdFromName(bill.info.availableWards, bill.info.ward);
            delete bill.info.availableDistricts;
            delete bill.info.availableProvinces;
            delete bill.info.availableWards;
            sendToApiWebhook(bill);
        }

        function sendToApiWebhook(order){
            var rawWebhookURL = "https://hooks.zapier.com/hooks/catch/2274589/rrshkw/";
            $.ajax({
                type: "POST",
                url: rawWebhookURL,
                data: JSON.stringify(order),
                success: function (res) {
                    console.log(res);
                    sendFullDetailsToWebhook4Excel(order);
                },
                error: function (error) {
                    console.log(error);
                },
                dataType: "json"
            });
        }

        function sendFullDetailsToWebhook4Slack(order) {
            var webhookURL = "https://hooks.zapier.com/hooks/catch/2274589/9cmzdm/";
            var payload = {
                "to": "",
                "name": "",
                "address": "",
                "phone": "",
                "content": "",
                "orderId": ""
            };
            var slackMessageBody = prepareSlackMessageBody(order);
            payload.to = order.info.email;
            payload.orderId = order.id;
            payload.name = order.info.name;
            payload.address = buildAddress(order);
            payload.phone = order.info.phone1;
            payload.content = slackMessageBody;
            $.ajax({
                type: "POST",
                url: webhookURL,
                data: payload,
                success: function (res) {
                    console.log(res);
                },
                error: function (error) {
                    console.log(error);
                },
                dataType: "json"
            });
        }
        function prepareSlackMessageBody(order) {
            var orderContent = "";
            order.products.forEach(function (p) {
                if (p.amount > 0) {
                    orderContent += "•" + humanizeProductName(p.name) + " - " + p.amount + " x " + p.price + " = " + p.subtotal + "\n";
                }
            });
            orderContent += "Phí giao hàng: " + order.shippingCost + "\n" + "Tổng tiền: " + order.subtotal + "\n" + "Cách thanh toán: " + humanizePaymentType(order.info.paymentType);
            return orderContent;
        }

        function sendFullDetailsToWebhook4Excel(order) {
            var webhookURL = "https://hooks.zapier.com/hooks/catch/2274589/906tv0/";
            $.ajax({
                type: "POST",
                url: webhookURL,
                data: order,
                success: function (res) {
                    console.log("Data saved successfully!" + res);
                    sendToSmsWebhook(bill);
                    sendFullDetailsToWebhook4Slack(bill);
                    sendToEmailWebhook(bill);
                },
                error: function (error) {
                    console.log(error);
                    order.error = error;
                    sendOrderErrorToEmailWebhook(order);
                    window.location = "/order-error";
                },
                dataType: "json"
            });
        }

        function getFirstName(name) {
            nameArr = name.trim().split(" ");
            return nameArr && nameArr[nameArr.length - 1];
        }

        function sendToSmsWebhook(order) {
            var webhookURL = "https://hooks.zapier.com/hooks/catch/2274589/9eneca/";
            var payload = {"to": "", "name": "", "from": "32523276", "subtotal": "", "orderId": ""};
            payload.to = order.info.phone1;
            payload.orderId = order.id;
            var firstName = getFirstName(order.info.name);
            payload.name = firstName.isLatin() ? firstName : firstName.latinise();
            payload.subtotal = order.subtotal;
            $.ajax({
                type: "POST",
                url: webhookURL,
                data: payload,
                success: function (res) {
                    console.log(res);
                },
                error: function (error) {
                    console.log(error);
                },
                dataType: "json"
            });
        }

        function sendToEmailWebhook(order) {
            var webhookURL = "https://hooks.zapier.com/hooks/catch/2274589/98r7zl/";
            var payload = {
                "to": "",
                "name": "",
                "address": "",
                "phone": "",
                "from": "info@dalafarm.vn",
                "content": "",
                "orderId": ""
            };
            var htmlBody = prepareBody(order);
            payload.to = order.info.email;
            payload.orderId = order.id;
            payload.name = order.info.name;
            payload.address = buildAddress(order);
            payload.phone = order.info.phone1;
            payload.content = htmlBody;
            $.ajax({
                type: "POST",
                url: webhookURL,
                data: payload,
                success: function (res) {
                    console.log(res);
                    localStorage.setItem('order-' + order.id, JSON.stringify(order));
                    sessionStorage.removeItem('order');
                    window.location = "/thank-you";
                },
                error: function (error) {
                    console.log(error);
                    order.error = error;
                    localStorage.setItem('order-' + order.id, JSON.stringify(order));
                    window.location = "/order-error";
                },
                dataType: "json"
            });
        }

        function buildAddress(order) {
            return order.info.address + ", " + order.info.ward + ", " + order.info.district + ", " + order.info.province;
        }

        function sendOrderErrorToEmailWebhook(order) {
            var webhookURL = "https://hooks.zapier.com/hooks/catch/2274589/98r7zl/";
            var payload = {
                "to": "tom@dalafarm.vn",
                "name": "",
                "address": "",
                "phone": "",
                "from": "info@dalafarm.vn",
                "content": "",
                "orderId": ""
            };
            var htmlBody = prepareBody(order);
            payload.orderId = order.id;
            payload.name = order.info.name;
            payload.address = buildAddress(order);
            payload.phone = order.info.phone1;
            payload.content = "<p>Đơn hàng lỗi: " + order.error + "</p>" + htmlBody;
            $.ajax({
                type: "POST",
                url: webhookURL,
                data: payload,
                success: function (res) {
                    console.log(res);
                    localStorage.setItem('order-' + order.id, JSON.stringify(order));
                    sessionStorage.removeItem('order');
                    window.location = "/thank-you";
                },
                error: function (error) {
                    console.log(error);
                    order.error = error;
                    localStorage.setItem('order-' + order.id, JSON.stringify(order));
                    window.location = "/order-error";
                },
                dataType: "json"
            });
        }

        function prepareBody(order) {
            var head = "";
            var middle = "<table id='content'> <thead> <tr> <th>Tên</th> <th>Số lượng</th> <th>Đơn giá</th> <th>Thành tiền</th> </tr> </thead> <tbody>";
            var orderContent = buildOrderContent(order);
            var shipping = "</tbody> </table> <p>Phí giao hàng: <strong>" + numeral(order.shippingCost).format('0,0') + "</strong></p>";
            var total = "<p>Tổng tiền: <strong>" + numeral(order.subtotal).format('0,0') + "</strong></p>";
            var paymentType = "<p>Hình thức thanh toán: <strong>" + humanizePaymentType(order.info.paymentType) + "</strong></p>";
            var additionalNote = "<p>Ghi chú: <strong>" + order.info.additionalNote + "</strong></p>";
            var footer = "";
            return head + middle + orderContent + shipping + total + paymentType + additionalNote + footer;
        }

        function buildOrderContent(order) {
            var orderContent = "";
            var products = order.products;
            products.forEach(function (p) {
                if (p.amount > 0) {
                    orderContent += "<tr><td>" + humanizeProductName(p.name) + "</td><td>" + p.amount + "</td><td>" + numeral(p.price).format('0,0') + "</td><td>" + numeral(p.subtotal).format('0,0') + "</td></tr>";
                }
            });
            orderContent += buildPromotionalProducts(order);
            return orderContent;
        }

        function buildPromotionalProducts(order) {
            var promotionalProducts = order.promotionalProducts;
            if(promotionalProducts) {
                var content = "<tr>";
                if(promotionalProducts['lotusAmt'] && promotionalProducts['lotusAmt'] > 0) {
                    content += "<td>Bột Hạt Sen (50g) (Khuyến mãi)</td><td>1</td><td>119,000</td><td>-119,000</td>";
                }
                if(promotionalProducts['dalababyAmt'] && promotionalProducts['dalababyAmt'] > 0) {
                    content += "<td>Bột rau củ DalaBaby (70g) (Khuyến mãi)</td><td>1</td><td>199,000</td><td>-199,000</td>";
                }
                if(promotionalProducts['garlicoilAmt'] && promotionalProducts['garlicoilAmt'] > 0) {
                    content += "<td>Dầu tỏi tía Đà Lạt (250ml) (Khuyến mãi)</td><td>1</td><td>150,000</td><td>-150,000</td>";
                }
                if(promotionalProducts['mooncakeAmt'] && promotionalProducts['mooncakeAmt'] > 0) {
                    content += "<td>Hộp bánh trung thu 4 cái (Khuyến mãi)</td><td>" + promotionalProducts['mooncakeAmt'] + "</td><td>170,000</td><td>0</td>";
                }
                content += "</tr>";
                return content;
            }
        }
    });

</script>
</body>
</html>
